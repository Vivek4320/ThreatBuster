"use strict";(()=>{var e={};e.id=744,e.ids=[744],e.modules={3524:e=>{e.exports=require("@prisma/client")},2934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6005:e=>{e.exports=require("node:crypto")},7561:e=>{e.exports=require("node:fs")},9411:e=>{e.exports=require("node:path")},6452:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>c,PUT:()=>h});var n=r(9303),i=r(8716),a=r(670),l=r(4910),o=r(243),d=r(7070);let u=new(r(3524)).PrismaClient;async function c(){let{userId:e}=await (0,l.I)();if(!e)return d.NextResponse.json({error:"Unauthorized"},{status:401});let t=await (0,o.a)(),r=await u.userProfile.findUnique({where:{clerkUserId:e}});return!r&&t&&(r=await u.userProfile.create({data:{clerkUserId:e,email:t.emailAddresses[0].emailAddress,name:`${t.firstName} ${t.lastName}`}})),d.NextResponse.json(r)}async function h(e){let{userId:t}=await (0,l.I)();if(!t)return d.NextResponse.json({error:"Unauthorized"},{status:401});let r=await e.json(),s=await u.userProfile.update({where:{clerkUserId:t},data:r});return d.NextResponse.json(s)}let p=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/user/profile/route",pathname:"/api/user/profile",filename:"route",bundlePath:"app/api/user/profile/route"},resolvedPagePath:"C:\\Users\\vivek\\OneDrive\\Documents\\ThreatBuster\\app\\api\\user\\profile\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:f}=p,y="/api/user/profile/route";function v(){return(0,a.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:m})}},243:(e,t,r)=>{r.d(t,{a:()=>c});var s=r(2800),n=r(7487),i=r(7509),a=r(4511);let l=new(require("node:async_hooks")).AsyncLocalStorage;var o=r(1516);let d=async()=>{var e,t;let r;try{let e=await (0,n.vX)(),t=(0,a.Pg)(e,s._G.Headers.ClerkRequestData);r=(0,o.om)(t)}catch(e){if(e&&(0,n.mx)(e))throw e}let d=null!=(t=null==(e=l.getStore())?void 0:e.get("requestData"))?t:r;return(null==d?void 0:d.secretKey)||(null==d?void 0:d.publishableKey)?(0,i.f)(d):(0,i.f)({})};var u=r(4910);async function c(e){r(8769);let{userId:t}=await (0,u.I)({treatPendingAsSignedOut:null==e?void 0:e.treatPendingAsSignedOut});return t?(await d()).users.getUser(t):null}},7509:(e,t,r)=>{r.d(t,{f:()=>m});var s=r(6846);r(3931);var n=r(6454);r(3733),r(3027);var i=r(4430),a=r(7148),l=class{#e;#t=864e5;constructor(e){this.#e=e}isEventThrottled(e){let t=Date.now(),r=this.#r(e),s=this.#e.getItem(r);return!!s&&!(t-s>this.#t)||(this.#e.setItem(r,t),!1)}#r(e){let{sk:t,pk:r,payload:s,...n}=e,i={...s,...n};return JSON.stringify(Object.keys({...s,...n}).sort().map(e=>i[e]))}},o=class{#s="clerk_telemetry_throttler";getItem(e){return this.#n()[e]}setItem(e,t){try{let r=this.#n();r[e]=t,localStorage.setItem(this.#s,JSON.stringify(r))}catch(e){e instanceof DOMException&&("QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&localStorage.length>0&&localStorage.removeItem(this.#s)}}removeItem(e){try{let t=this.#n();delete t[e],localStorage.setItem(this.#s,JSON.stringify(t))}catch{}}#n(){try{let e=localStorage.getItem(this.#s);if(!e)return{};return JSON.parse(e)}catch{return{}}}static isSupported(){return"undefined"!=typeof window&&!!window.localStorage}},d=class{#e=new Map;#i=1e4;getItem(e){if(this.#e.size>this.#i){this.#e.clear();return}return this.#e.get(e)}setItem(e,t){this.#e.set(e,t)}removeItem(e){this.#e.delete(e)}},u=new Set(["error","warn","info","debug","trace"]),c={samplingRate:1,maxBufferSize:5,endpoint:"https://clerk-telemetry.com"},h=class{#a;#l;#o={};#d=[];#u=null;constructor(e){this.#a={maxBufferSize:e.maxBufferSize??c.maxBufferSize,samplingRate:e.samplingRate??c.samplingRate,perEventSampling:e.perEventSampling??!0,disabled:e.disabled??!1,debug:e.debug??!1,endpoint:c.endpoint},e.clerkVersion||"undefined"!=typeof window?this.#o.clerkVersion=e.clerkVersion??"":this.#o.clerkVersion="",this.#o.sdk=e.sdk,this.#o.sdkVersion=e.sdkVersion,this.#o.publishableKey=e.publishableKey??"";let t=(0,a.nQ)(e.publishableKey);t&&(this.#o.instanceType=t.instanceType),e.secretKey&&(this.#o.secretKey=e.secretKey.substring(0,16));let r=o.isSupported()?new o:new d;this.#l=new l(r)}get isEnabled(){return!("development"!==this.#o.instanceType||this.#a.disabled||"undefined"!=typeof process&&process.env&&(0,i.fQ)(process.env.CLERK_TELEMETRY_DISABLED)||"undefined"!=typeof window&&window?.navigator?.webdriver)}get isDebug(){return this.#a.debug||"undefined"!=typeof process&&process.env&&(0,i.fQ)(process.env.CLERK_TELEMETRY_DEBUG)}record(e){try{let t=this.#c(e.event,e.payload);if(this.#h(t.event,t),!this.#p(t,e.eventSamplingRate))return;this.#d.push({kind:"event",value:t}),this.#g()}catch(e){console.error("[clerk/telemetry] Error recording telemetry event",e)}}recordLog(e){try{if(!this.#m(e))return;let t="string"==typeof e?.level&&u.has(e.level),r="string"==typeof e?.message&&e.message.trim().length>0,s=null,n=e?.timestamp;if("number"==typeof n||"string"==typeof n){let e=new Date(n);Number.isNaN(e.getTime())||(s=e)}if(!t||!r||null===s){this.isDebug&&"undefined"!=typeof console&&console.warn("[clerk/telemetry] Dropping invalid telemetry log entry",{levelIsValid:t,messageIsValid:r,timestampIsValid:null!==s});return}let i=this.#f(),a={sdk:i.name,sdkv:i.version,cv:this.#o.clerkVersion??"",lvl:e.level,msg:e.message,ts:s.toISOString(),pk:this.#o.publishableKey||null,payload:this.#y(e.context)};this.#d.push({kind:"log",value:a}),this.#g()}catch(e){console.error("[clerk/telemetry] Error recording telemetry log entry",e)}}#p(e,t){return this.isEnabled&&!this.isDebug&&this.#v(e,t)}#m(e){return!0}#v(e,t){let r=Math.random();return r<=this.#a.samplingRate&&(!1===this.#a.perEventSampling||void 0===t||r<=t)&&!this.#l.isEventThrottled(e)}#g(){if("undefined"==typeof window){this.#k();return}if(this.#d.length>=this.#a.maxBufferSize){this.#u&&("undefined"!=typeof cancelIdleCallback?cancelIdleCallback(Number(this.#u)):clearTimeout(Number(this.#u))),this.#k();return}this.#u||("requestIdleCallback"in window?this.#u=requestIdleCallback(()=>{this.#k(),this.#u=null}):this.#u=setTimeout(()=>{this.#k(),this.#u=null},0))}#k(){let e=[...this.#d];if(this.#d=[],this.#u=null,0===e.length)return;let t=e.filter(e=>"event"===e.kind).map(e=>e.value),r=e.filter(e=>"log"===e.kind).map(e=>e.value);t.length>0&&fetch(new URL("/v1/event",this.#a.endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({events:t})}).catch(()=>void 0),r.length>0&&fetch(new URL("/v1/logs",this.#a.endpoint),{headers:{"Content-Type":"application/json"},keepalive:!0,method:"POST",body:JSON.stringify({logs:r})}).catch(()=>void 0)}#h(e,t){this.isDebug&&(void 0!==console.groupCollapsed?(console.groupCollapsed("[clerk/telemetry]",e),console.log(t),console.groupEnd()):console.log("[clerk/telemetry]",e,t))}#f(){let e={name:this.#o.sdk,version:this.#o.sdkVersion};if("undefined"!=typeof window){let t=window;if(t.Clerk){let r=t.Clerk;if("object"==typeof r&&null!==r&&"constructor"in r&&"function"==typeof r.constructor&&r.constructor.sdkMetadata){let{name:t,version:s}=r.constructor.sdkMetadata;void 0!==t&&(e.name=t),void 0!==s&&(e.version=s)}}}return e}#c(e,t){let r=this.#f();return{event:e,cv:this.#o.clerkVersion??"",it:this.#o.instanceType??"",sdk:r.name,sdkv:r.version,...this.#o.publishableKey?{pk:this.#o.publishableKey}:{},...this.#o.secretKey?{sk:this.#o.secretKey}:{},payload:t}}#y(e){if(null==e||"object"!=typeof e)return null;try{let t=JSON.parse(JSON.stringify(e));if(t&&"object"==typeof t&&!Array.isArray(t))return t;return null}catch{return null}}};r(8179),(0,n.A)(s.WX);var p=r(232);let g={secretKey:p.Cn,publishableKey:p.Am,apiUrl:p.T5,apiVersion:p.Gn,userAgent:"@clerk/nextjs@6.33.7",proxyUrl:p.NM,domain:p.yK,isSatellite:p.lo,machineSecretKey:p.v$,sdkMetadata:p.nE,telemetry:{disabled:p.CY,debug:p.w4}},m=e=>(function(e){let t={...e},r=(0,s.gf)(t),n=(0,s.sA)({options:t,apiClient:r}),i=new h({publishableKey:t.publishableKey,secretKey:t.secretKey,samplingRate:.1,...t.sdkMetadata?{sdk:t.sdkMetadata.name,sdkVersion:t.sdkMetadata.version}:{},...t.telemetry||{}});return{...r,...n,telemetry:i}})({...g,...e})},9303:(e,t,r)=>{e.exports=r(517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[13],()=>r(6452));module.exports=s})();